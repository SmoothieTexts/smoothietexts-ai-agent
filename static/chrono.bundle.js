(()=>{var e={353:function(e){e.exports=function(){"use strict";var e=6e4,t=36e5,n="millisecond",r="second",s="minute",a="hour",i="day",o="week",d="month",u="quarter",l="year",c="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},p={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),s=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(s,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),s=t.clone().add(r,d),a=n-s<0,i=t.clone().add(r+(a?-1:1),d);return+(-(r+(n-s)/(a?s-i:i-s))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:d,y:l,w:o,d:i,D:c,h:a,m:s,s:r,ms:n,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",x={};x[w]=y;var T="$isDayjsObject",M=function(e){return e instanceof P||!(!e||!e[T])},D=function e(t,n,r){var s;if(!t)return w;if("string"==typeof t){var a=t.toLowerCase();x[a]&&(s=a),n&&(x[a]=n,s=a);var i=t.split("-");if(!s&&i.length>1)return e(i[0])}else{var o=t.name;x[o]=t,s=o}return!r&&s&&(w=s),s||!r&&w},$=function(e,t){if(M(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new P(n)},A=p;A.l=D,A.i=M,A.w=function(e,t){return $(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function y(e){this.$L=D(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[T]=!0}var g=y.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(A.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(m);if(r){var s=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],s,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return A},g.isValid=function(){return!(this.$d.toString()===h)},g.isSame=function(e,t){var n=$(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return $(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<$(e)},g.$g=function(e,t,n){return A.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,u=!!A.u(t)||t,h=A.p(e),m=function(e,t){var r=A.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return u?r:r.endOf(i)},f=function(e,t){return A.w(n.toDate()[e].apply(n.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},y=this.$W,g=this.$M,p=this.$D,w="set"+(this.$u?"UTC":"");switch(h){case l:return u?m(1,0):m(31,11);case d:return u?m(1,g):m(0,g+1);case o:var x=this.$locale().weekStart||0,T=(y<x?y+7:y)-x;return m(u?p-T:p+(6-T),g);case i:case c:return f(w+"Hours",0);case a:return f(w+"Minutes",1);case s:return f(w+"Seconds",2);case r:return f(w+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var o,u=A.p(e),h="set"+(this.$u?"UTC":""),m=(o={},o[i]=h+"Date",o[c]=h+"Date",o[d]=h+"Month",o[l]=h+"FullYear",o[a]=h+"Hours",o[s]=h+"Minutes",o[r]=h+"Seconds",o[n]=h+"Milliseconds",o)[u],f=u===i?this.$D+(t-this.$W):t;if(u===d||u===l){var y=this.clone().set(c,1);y.$d[m](f),y.init(),this.$d=y.set(c,Math.min(this.$D,y.daysInMonth())).$d}else m&&this.$d[m](f);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[A.p(e)]()},g.add=function(n,u){var c,h=this;n=Number(n);var m=A.p(u),f=function(e){var t=$(h);return A.w(t.date(t.date()+Math.round(e*n)),h)};if(m===d)return this.set(d,this.$M+n);if(m===l)return this.set(l,this.$y+n);if(m===i)return f(1);if(m===o)return f(7);var y=(c={},c[s]=e,c[a]=t,c[r]=1e3,c)[m]||1,g=this.$d.getTime()+n*y;return A.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||h;var r=e||"YYYY-MM-DDTHH:mm:ssZ",s=A.z(this),a=this.$H,i=this.$m,o=this.$M,d=n.weekdays,u=n.months,l=n.meridiem,c=function(e,n,s,a){return e&&(e[n]||e(t,r))||s[n].slice(0,a)},m=function(e){return A.s(a%12||12,e,"0")},y=l||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return A.s(t.$y,4,"0");case"M":return o+1;case"MM":return A.s(o+1,2,"0");case"MMM":return c(n.monthsShort,o,u,3);case"MMMM":return c(u,o);case"D":return t.$D;case"DD":return A.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return c(n.weekdaysMin,t.$W,d,2);case"ddd":return c(n.weekdaysShort,t.$W,d,3);case"dddd":return d[t.$W];case"H":return String(a);case"HH":return A.s(a,2,"0");case"h":return m(1);case"hh":return m(2);case"a":return y(a,i,!0);case"A":return y(a,i,!1);case"m":return String(i);case"mm":return A.s(i,2,"0");case"s":return String(t.$s);case"ss":return A.s(t.$s,2,"0");case"SSS":return A.s(t.$ms,3,"0");case"Z":return s}return null}(e)||s.replace(":","")})},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,c,h){var m,f=this,y=A.p(c),g=$(n),p=(g.utcOffset()-this.utcOffset())*e,w=this-g,x=function(){return A.m(f,g)};switch(y){case l:m=x()/12;break;case d:m=x();break;case u:m=x()/3;break;case o:m=(w-p)/6048e5;break;case i:m=(w-p)/864e5;break;case a:m=w/t;break;case s:m=w/e;break;case r:m=w/1e3;break;default:m=w}return h?m:A.a(m)},g.daysInMonth=function(){return this.endOf(d).$D},g.$locale=function(){return x[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=D(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return A.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},y}(),C=P.prototype;return $.prototype=C,[["$ms",n],["$s",r],["$m",s],["$H",a],["$W",i],["$M",d],["$y",l],["$D",c]].forEach(function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),$.extend=function(e,t){return e.$i||(e(t,P,$),e.$i=!0),$},$.locale=D,$.isDayjs=M,$.unix=function(e){return $(1e3*e)},$.en=x[w],$.Ls=x,$.p={},$}()},816:function(e){e.exports=function(){"use strict";var e="month",t="quarter";return function(n,r){var s=r.prototype;s.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var a=s.add;s.add=function(n,r){return n=Number(n),this.$utils().p(r)===t?this.add(3*n,e):a.bind(this)(n,r)};var i=s.startOf;s.startOf=function(n,r){var s=this.$utils(),a=!!s.u(r)||r;if(s.p(n)===t){var o=this.quarter()-1;return a?this.month(3*o).startOf(e).startOf("day"):this.month(3*o+2).endOf(e).endOf("day")}return i.bind(this)(n,r)}}}()}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{Chrono:()=>lt,GB:()=>yt,Meridiem:()=>i,ParsingComponents:()=>x,ParsingResult:()=>T,ReferenceWithTimezone:()=>w,Weekday:()=>o,casual:()=>mt,configuration:()=>ht,parse:()=>gt,parseDate:()=>pt,strict:()=>ft});var t={};n.r(t),n.d(t,{Chrono:()=>lt,Meridiem:()=>i,ParsingComponents:()=>x,ParsingResult:()=>T,ReferenceWithTimezone:()=>w,Weekday:()=>o,casual:()=>zt,createCasualConfiguration:()=>Ht,createConfiguration:()=>Bt,parse:()=>Lt,parseDate:()=>Vt,strict:()=>Ut});var r={};n.r(r),n.d(r,{Chrono:()=>lt,Meridiem:()=>i,ParsingComponents:()=>x,ParsingResult:()=>T,ReferenceWithTimezone:()=>w,Weekday:()=>o,casual:()=>$n,createCasualConfiguration:()=>Rn,createConfiguration:()=>Sn,hant:()=>Dn,parse:()=>Pn,parseDate:()=>Cn,strict:()=>An});var s={};n.r(s),n.d(s,{Chrono:()=>lt,Meridiem:()=>i,ParsingComponents:()=>x,ParsingResult:()=>T,ReferenceWithTimezone:()=>w,Weekday:()=>o,casual:()=>Nn,createCasualConfiguration:()=>Wn,createConfiguration:()=>In,hans:()=>On,parse:()=>vn,parseDate:()=>Fn,strict:()=>jn});var a={};n.r(a),n.d(a,{Chrono:()=>lt,Meridiem:()=>i,ParsingComponents:()=>x,ParsingResult:()=>T,ReferenceWithTimezone:()=>w,Weekday:()=>o,casual:()=>Yn,createCasualConfiguration:()=>Vn,createConfiguration:()=>Hn,hans:()=>s,hant:()=>r,parse:()=>Un,parseDate:()=>Ln,strict:()=>zn});var i,o,d,u,l=n(816),c=n(353);function h(e,t){e.imply("day",t.getDate()),e.imply("month",t.getMonth()+1),e.imply("year",t.getFullYear())}(u=i||(i={}))[u.AM=0]="AM",u[u.PM=1]="PM",function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(o||(o={})),function(e){e[e.JANUARY=1]="JANUARY",e[e.FEBRUARY=2]="FEBRUARY",e[e.MARCH=3]="MARCH",e[e.APRIL=4]="APRIL",e[e.MAY=5]="MAY",e[e.JUNE=6]="JUNE",e[e.JULY=7]="JULY",e[e.AUGUST=8]="AUGUST",e[e.SEPTEMBER=9]="SEPTEMBER",e[e.OCTOBER=10]="OCTOBER",e[e.NOVEMBER=11]="NOVEMBER",e[e.DECEMBER=12]="DECEMBER"}(d||(d={}));const m={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:120,timezoneOffsetNonDst:60,dstStart:e=>y(e,d.MARCH,o.SUNDAY,2),dstEnd:e=>y(e,d.OCTOBER,o.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-300,timezoneOffsetNonDst:-360,dstStart:e=>f(e,d.MARCH,o.SUNDAY,2,2),dstEnd:e=>f(e,d.NOVEMBER,o.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-240,timezoneOffsetNonDst:-300,dstStart:e=>f(e,d.MARCH,o.SUNDAY,2,2),dstEnd:e=>f(e,d.NOVEMBER,o.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-360,timezoneOffsetNonDst:-420,dstStart:e=>f(e,d.MARCH,o.SUNDAY,2,2),dstEnd:e=>f(e,d.NOVEMBER,o.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-420,timezoneOffsetNonDst:-480,dstStart:e=>f(e,d.MARCH,o.SUNDAY,2,2),dstEnd:e=>f(e,d.NOVEMBER,o.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function f(e,t,n,r,s=0){let a=0,i=0;for(;i<r;)a++,new Date(e,t-1,a).getDay()===n&&i++;return new Date(e,t-1,a,s)}function y(e,t,n,r=0){const s=0===n?7:n,a=new Date(e,t-1+1,1,12),i=0===a.getDay()?7:a.getDay();let o;return o=i===s?7:i<s?7+i-s:i-s,a.setDate(a.getDate()-o),new Date(e,t-1,a.getDate(),r)}function g(e,t,n={}){if(null==e)return null;if("number"==typeof e)return e;const r=n[e]??m[e];return null==r?null:"number"==typeof r?r:null==t?null:c(t).isAfter(r.dstStart(t.getFullYear()))&&!c(t).isAfter(r.dstEnd(t.getFullYear()))?r.timezoneOffsetDuringDst:r.timezoneOffsetNonDst}function p(e){const t={};for(const n in e)t[n]=-e[n];return t}c.extend(l);class w{instant;timezoneOffset;constructor(e){(e=e??new Date)instanceof Date?(this.instant=e,this.timezoneOffset=null):(this.instant=e.instant??new Date,this.timezoneOffset=g(e.timezone,this.instant))}getDateWithAdjustedTimezone(){const e=new Date(this.instant);return null!==this.timezoneOffset&&e.setMinutes(e.getMinutes()-this.getSystemTimezoneAdjustmentMinute(this.instant)),e}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);const n=-e.getTimezoneOffset();return n-(t??this.timezoneOffset??n)}getTimezoneOffset(){return this.timezoneOffset??-this.instant.getTimezoneOffset()}}class x{knownValues;impliedValues;reference;_tags=new Set;constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(const e in t)this.knownValues[e]=t[e];const n=e.getDateWithAdjustedTimezone();this.imply("day",n.getDate()),this.imply("month",n.getMonth()+1),this.imply("year",n.getFullYear()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues||(this.impliedValues[e]=t),this}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){const e=new x(this.reference);e.knownValues={},e.impliedValues={};for(const t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(const t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!(this.isCertain("weekday")||this.isCertain("day")||this.isCertain("month")||this.isCertain("year"))}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||null!=this.get("hour")&&e.getHours()!=this.get("hour")||null!=this.get("minute")&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {\n            tags: ${JSON.stringify(Array.from(this._tags).sort())}, \n            knownValues: ${JSON.stringify(this.knownValues)}, \n            impliedValues: ${JSON.stringify(this.impliedValues)}}, \n            reference: ${JSON.stringify(this.reference)}]`}dayjs(){return c(this.dateWithoutTimezoneAdjustment())}date(){const e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+6e4*t)}addTag(e){return this._tags.add(e),this}addTags(e){for(const t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,t){let n=function(e,t){let n=new Date(e);if(t.y&&(t.year=t.y,delete t.y),t.mo&&(t.month=t.mo,delete t.mo),t.M&&(t.month=t.M,delete t.M),t.w&&(t.week=t.w,delete t.w),t.d&&(t.day=t.d,delete t.d),t.h&&(t.hour=t.h,delete t.h),t.m&&(t.minute=t.m,delete t.m),t.s&&(t.second=t.s,delete t.s),t.ms&&(t.millisecond=t.ms,delete t.ms),"year"in t){const e=Math.floor(t.year);n.setFullYear(n.getFullYear()+e);const r=t.year-e;r>0&&(t.month=t?.month??0,t.month+=12*r)}if("quarter"in t){const e=Math.floor(t.quarter);n.setMonth(n.getMonth()+3*e)}if("month"in t){const e=Math.floor(t.month);n.setMonth(n.getMonth()+e);const r=t.month-e;r>0&&(t.week=t?.week??0,t.week+=4*r)}if("week"in t){const e=Math.floor(t.week);n.setDate(n.getDate()+7*e);const r=t.week-e;r>0&&(t.day=t?.day??0,t.day+=Math.round(7*r))}if("day"in t){const e=Math.floor(t.day);n.setDate(n.getDate()+e);const r=t.day-e;r>0&&(t.hour=t?.hour??0,t.hour+=Math.round(24*r))}if("hour"in t){const e=Math.floor(t.hour);n.setHours(n.getHours()+e);const r=t.hour-e;r>0&&(t.minute=t?.minute??0,t.minute+=Math.round(60*r))}if("minute"in t){const e=Math.floor(t.minute);n.setMinutes(n.getMinutes()+e);const r=t.minute-e;r>0&&(t.second=t?.second??0,t.second+=Math.round(60*r))}if("second"in t){const e=Math.floor(t.second);n.setSeconds(n.getSeconds()+e);const r=t.second-e;r>0&&(t.millisecond=t?.millisecond??0,t.millisecond+=Math.round(1e3*r))}if("millisecond"in t){const e=Math.floor(t.millisecond);n.setMilliseconds(n.getMilliseconds()+e)}return n}(e.getDateWithAdjustedTimezone(),t);const r=new x(e);var s,a;return r.addTag("result/relativeDate"),t.hour||t.minute||t.second?(r.addTag("result/relativeDateAndTime"),a=n,(s=r).assign("hour",a.getHours()),s.assign("minute",a.getMinutes()),s.assign("second",a.getSeconds()),s.assign("millisecond",a.getMilliseconds()),s.assign("meridiem",a.getHours()<12?i.AM:i.PM),function(e,t){e.assign("day",t.getDate()),e.assign("month",t.getMonth()+1),e.assign("year",t.getFullYear())}(r,n),r.assign("timezoneOffset",e.getTimezoneOffset())):(function(e,t){e.imply("hour",t.getHours()),e.imply("minute",t.getMinutes()),e.imply("second",t.getSeconds()),e.imply("millisecond",t.getMilliseconds()),e.imply("meridiem",t.getHours()<12?i.AM:i.PM)}(r,n),r.imply("timezoneOffset",e.getTimezoneOffset()),t.day?(r.assign("day",n.getDate()),r.assign("month",n.getMonth()+1),r.assign("year",n.getFullYear()),r.assign("weekday",n.getDay())):t.week?(r.assign("day",n.getDate()),r.assign("month",n.getMonth()+1),r.assign("year",n.getFullYear()),r.imply("weekday",n.getDay())):(r.imply("day",n.getDate()),t.month?(r.assign("month",n.getMonth()+1),r.assign("year",n.getFullYear())):(r.imply("month",n.getMonth()+1),t.year?r.assign("year",n.getFullYear()):r.imply("year",n.getFullYear())))),r}}class T{refDate;index;text;reference;start;end;constructor(e,t,n,r,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=r||new x(e),this.end=s}clone(){const e=new T(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}addTag(e){return this.start.addTag(e),this.end&&this.end.addTag(e),this}addTags(e){return this.start.addTags(e),this.end&&this.end.addTags(e),this}tags(){const e=new Set(this.start.tags());if(this.end)for(const t of this.end.tags())e.add(t);return e}toString(){const e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function M(e,t,n="\\s{0,5},?\\s{0,5}"){const r=t.replace(/\((?!\?)/g,"(?:");return`${e}${r}(?:${n}${r}){0,10}`}function D(e){const t=function(e){let t;return t=e instanceof Array?[...e]:e instanceof Map?Array.from(e.keys()):Object.keys(e),t}(e).sort((e,t)=>t.length-e.length).join("|").replace(/\./g,"\\.");return`(?:${t})`}function $(e){return e<100&&(e+=e>50?1900:2e3),e}function A(e,t,n){const r=c(e);let s=r;s=s.month(n-1),s=s.date(t),s=s.year(r.year());const a=s.add(1,"y"),i=s.add(-1,"y");return Math.abs(a.diff(r))<Math.abs(s.diff(r))?s=a:Math.abs(i.diff(r))<Math.abs(s.diff(r))&&(s=i),s.year()}const P={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},C={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},R={...C,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},S={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},E={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},b={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},k={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...b},O=`(?:${D(S)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`,N=`(?:${D(E)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function j(e){let t=e.toLowerCase();return void 0!==E[t]?E[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const v="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function F(e){return/BE/i.test(e)?(e=e.replace(/BE/i,""),parseInt(e)-543):/BCE?/i.test(e)?(e=e.replace(/BCE?/i,""),-parseInt(e)):/(AD|CE)/i.test(e)?(e=e.replace(/(AD|CE)/i,""),parseInt(e)):$(parseInt(e))}const W=`(${O})\\s{0,3}(${D(k)})`,I=new RegExp(W,"i"),Y=`(${O})\\s{0,3}(${D(b)})`,z="\\s{0,5},?(?:\\s*and)?\\s{0,5}",U=M("(?:(?:about|around)\\s{0,3})?",W,z),L=M("(?:(?:about|around)\\s{0,3})?",Y,z);function V(e){const t={};let n=e,r=I.exec(n);for(;r;)H(t,r),n=n.substring(r[0].length).trim(),r=I.exec(n);return 0==Object.keys(t).length?null:t}function H(e,t){if(t[0].match(/^[a-zA-Z]+$/))return;const n=function(e){const t=e.toLowerCase();return void 0!==S[t]?S[t]:"a"===t||"an"===t||"the"==t?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}(t[1]);e[k[t[2].toLowerCase()]]=n}class B{innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}cachedInnerPattern=null;cachedPattern=null;pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)||(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags)),this.cachedPattern}extract(e,t){const n=t[1]??"";t.index=t.index+n.length,t[0]=t[0].substring(n.length);for(let e=2;e<t.length;e++)t[e-1]=t[e];return this.innerExtract(e,t)}}const _=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${U})(?=\\W|$)`,"i"),G=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${U})(?=\\W|$)`,"i"),K=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${L})(?=\\W|$)`,"i");class J extends B{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?K:e.option.forwardDate?_:G}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;const n=V(t[1]);return n?(e.debug(()=>{console.log(n),console.log(x.createRelativeFromReference(e.reference,n))}),x.createRelativeFromReference(e.reference,n)):null}}const Z=new RegExp(`(?:on\\s{0,3})?(${N})(?:\\s{0,3}(?:to|\\-|\\–|until|through|till)?\\s{0,3}(${N}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${D(R)})(?:(?:-|/|,?\\s{0,3})(${v}(?!\\w)))?(?=\\W|$)`,"i");class q extends B{innerPattern(){return Z}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]),r=R[t[3].toLowerCase()],s=j(t[1]);if(s>31)return t.index=t.index+t[1].length,null;if(n.start.assign("month",r),n.start.assign("day",s),t[4]){const e=F(t[4]);n.start.assign("year",e)}else{const t=A(e.refDate,s,r);n.start.imply("year",t)}if(t[2]){const e=j(t[2]);n.end=n.start.clone(),n.end.assign("day",e)}return n}}const Q=new RegExp(`(${D(R)})(?:-|/|\\s*,?\\s*)(${N})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${N})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${v}))?(?=\\W|$)(?!\\:\\d)`,"i");class X extends B{shouldSkipYearLikeDate;constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return Q}innerExtract(e,t){const n=R[t[1].toLowerCase()],r=j(t[2]);if(r>31)return null;if(this.shouldSkipYearLikeDate&&!t[3]&&!t[4]&&t[2].match(/^2[0-5]$/))return null;const s=e.createParsingComponents({day:r,month:n}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[4]){const e=F(t[4]);s.assign("year",e)}else{const t=A(e.refDate,r,n);s.imply("year",t)}if(!t[3])return s;const a=j(t[3]),i=e.createParsingResult(t.index,t[0]);return i.start=s,i.end=s.clone(),i.end.assign("day",a),i}}const ee=new RegExp(`((?:in)\\s*)?(${D(R)})\\s*(?:(?:,|-|of)?\\s*(${v})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class te extends B{innerPattern(){return ee}innerExtract(e,t){const n=t[2].toLowerCase();if(t[0].length<=3&&!C[n])return null;const r=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);r.start.imply("day",1),r.start.addTag("parser/ENMonthNameParser");const s=R[n];if(r.start.assign("month",s),t[3]){const e=F(t[3]);r.start.assign("year",e)}else{const t=A(e.refDate,1,s);r.start.imply("year",t)}return r}}const ne=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${D(R)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class re extends B{strictMonthDateOrder;constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return ne}innerExtract(e,t){const n=parseInt(t[1]);let r=parseInt(t[4]),s=t[3]?parseInt(t[3]):R[t[2].toLowerCase()];if(s<1||s>12){if(this.strictMonthDateOrder)return null;r>=1&&r<=12&&([s,r]=[r,s])}return r<1||r>31?null:{day:r,month:s,year:n}}}const se=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class ae extends B{innerPattern(){return se}innerExtract(e,t){const n=parseInt(t[2]),r=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",r).assign("year",n)}}class ie{strictMode;constructor(e=!1){this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){const n=this.extractPrimaryTimeComponents(e,t);if(!n)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);const r=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(r,s,n);t.index+=t[0].length;const i=e.text.substring(t.index),o=this.getFollowingTimePatternThroughCache().exec(i);if(s.match(/^\d{3,4}/)&&o){if(o[0].match(/^\s*([+-])\s*\d{2,4}$/))return null;if(o[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))return null}return!o||o[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,o,a),a.end&&(a.text+=o[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){const r=e.createParsingComponents();let s=0,a=null,o=parseInt(t[2]);if(o>100){if(this.strictMode||null!=t[3])return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(null!=t[3]){if(1==t[3].length&&!t[6])return null;s=parseInt(t[3])}if(s>=60)return null;if(o>12&&(a=i.PM),null!=t[6]){if(o>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(a=i.AM,12==o&&(o=0)),"p"==e&&(a=i.PM,12!=o&&(o+=12))}if(r.assign("hour",o),r.assign("minute",s),null!==a?r.assign("meridiem",a):o<12?r.imply("meridiem",i.AM):r.imply("meridiem",i.PM),null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;r.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;r.assign("second",e)}return r}extractFollowingTimeComponents(e,t,n){const r=e.createParsingComponents();if(null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;r.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;r.assign("second",e)}let s=parseInt(t[2]),a=0,o=-1;if(null!=t[3]?a=parseInt(t[3]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=i.PM),null!=t[6]){if(s>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(o=i.AM,12==s&&(s=0,r.isCertain("day")||r.imply("day",r.get("day")+1))),"p"==e&&(o=i.PM,12!=s&&(s+=12)),n.start.isCertain("meridiem")||(o==i.AM?(n.start.imply("meridiem",i.AM),12==n.start.get("hour")&&n.start.assign("hour",0)):(n.start.imply("meridiem",i.PM),12!=n.start.get("hour")&&n.start.assign("hour",n.start.get("hour")+12)))}return r.assign("hour",s),r.assign("minute",a),o>=0?r.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?r.imply("meridiem",i.AM):s<=12&&(r.assign("hour",s+12),r.assign("meridiem",i.PM)):s>12?r.imply("meridiem",i.PM):s<=12&&r.imply("meridiem",i.AM),r.date().getTime()<n.start.date().getTime()&&r.imply("day",r.get("day")+1),r}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/))return null;if(e.text.match(/^\d\d\d+$/))return null;if(e.text.match(/\d[apAP]$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){const e=t[1];if(this.strictMode)return null;if(e.includes(".")&&!e.match(/\d(\.\d{2})+$/))return null;if(parseInt(e)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;const e=t[1],n=t[2];if(n.includes(".")&&!n.match(/\d(\.\d{2})+$/))return null;const r=parseInt(n),s=parseInt(e);if(r>24||s>24)return null}return e}cachedPrimaryPrefix=null;cachedPrimarySuffix=null;cachedPrimaryTimePattern=null;getPrimaryTimePatternThroughCache(){const e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t||(this.cachedPrimaryTimePattern=function(e,t,n,r){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|：)(\\d{1,2})(?:(?::|：)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${n}`,r)}(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t),this.cachedPrimaryTimePattern}cachedFollowingPhase=null;cachedFollowingSuffix=null;cachedFollowingTimePatten=null;getFollowingTimePatternThroughCache(){const e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t||(this.cachedFollowingTimePatten=function(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:(?:\\.|\\:|\\：)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t),this.cachedFollowingTimePatten}}class oe extends ie{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\–|\\~|\\〜|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){const n=super.extractPrimaryTimeComponents(e,t);if(!n)return n;if(t[0].endsWith("night")){const e=n.get("hour");e>=6&&e<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",i.PM)):e<6&&n.assign("meridiem",i.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",i.PM);const e=n.get("hour");e>=0&&e<=6&&n.assign("hour",n.get("hour")+12)}return t[0].endsWith("morning")&&(n.assign("meridiem",i.AM),n.get("hour")<12&&n.assign("hour",n.get("hour"))),n.addTag("parser/ENTimeExpressionParser")}extractFollowingTimeComponents(e,t,n){const r=super.extractFollowingTimeComponents(e,t,n);return r&&r.addTag("parser/ENTimeExpressionParser"),r}}const de=new RegExp(`(${U})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),ue=new RegExp(`(${L})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class le extends B{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?ue:de}innerExtract(e,t){const n=V(t[1]);return n?x.createRelativeFromReference(e.reference,p(n)):null}}const ce=new RegExp(`(${U})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),he=new RegExp(`(${L})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i");class me extends B{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?he:ce}innerExtract(e,t){const n=V(t[1]);return n?x.createRelativeFromReference(e.reference,n):null}}class fe{refine(e,t){return t.filter(t=>this.isValid(e,t))}}class ye{refine(e,t){if(t.length<2)return t;const n=[];let r=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];const i=e.text.substring(r.index+r.text.length,s.index);if(this.shouldMergeResults(i,r,s,e)){const t=r,n=s,a=this.mergeResults(i,t,n,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${t} and ${n} into ${a}`)}),r=a}else n.push(r),r=s}return null!=r&&n.push(r),n}}class ge extends ye{shouldMergeResults(e,t,n){return!t.end&&!n.end&&null!=e.match(this.patternBetween())}mergeResults(e,t,n){if(t.start.isOnlyWeekdayComponent()||n.start.isOnlyWeekdayComponent()||(n.start.getCertainComponents().forEach(e=>{t.start.isCertain(e)||t.start.imply(e,n.start.get(e))}),t.start.getCertainComponents().forEach(e=>{n.start.isCertain(e)||n.start.imply(e,t.start.get(e))})),t.start.date().getTime()>n.start.date().getTime()){let e=t.start.dayjs(),r=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&r.add(7,"days").isAfter(e)?(r=r.add(7,"days"),n.start.imply("day",r.date()),n.start.imply("month",r.month()+1),n.start.imply("year",r.year())):t.start.isOnlyWeekdayComponent()&&e.add(-7,"days").isBefore(r)?(e=e.add(-7,"days"),t.start.imply("day",e.date()),t.start.imply("month",e.month()+1),t.start.imply("year",e.year())):n.start.isDateWithUnknownYear()&&r.add(1,"years").isAfter(e)?(r=r.add(1,"years"),n.start.imply("year",r.year())):t.start.isDateWithUnknownYear()&&e.add(-1,"years").isBefore(r)?(e=e.add(-1,"years"),t.start.imply("year",e.year())):[n,t]=[t,n]}const r=t.clone();return r.start=t.start,r.end=n.start,r.index=Math.min(t.index,n.index),t.index<n.index?r.text=t.text+e+n.text:r.text=n.text+e+t.text,r}}class pe extends ge{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}}function we(e,t){e.assign("day",t.date()),e.assign("month",t.month()+1),e.assign("year",t.year())}function xe(e,t){e.imply("day",t.date()),e.imply("month",t.month()+1),e.imply("year",t.year())}function Te(e,t){e.imply("hour",t.hour()),e.imply("minute",t.minute()),e.imply("second",t.second()),e.imply("millisecond",t.millisecond())}function Me(e,t){const n=e.clone(),r=e.start,s=t.start;if(n.start=De(r,s),null!=e.end||null!=t.end){const r=De(null==e.end?e.start:e.end,null==t.end?t.start:t.end);if(null==e.end&&r.date().getTime()<n.start.date().getTime()){const e=r.dayjs().add(1,"day");r.isCertain("day")?we(r,e):xe(r,e)}n.end=r}return n}function De(e,t){const n=e.clone();return t.isCertain("hour")?(n.assign("hour",t.get("hour")),n.assign("minute",t.get("minute")),t.isCertain("second")?(n.assign("second",t.get("second")),t.isCertain("millisecond")?n.assign("millisecond",t.get("millisecond")):n.imply("millisecond",t.get("millisecond"))):(n.imply("second",t.get("second")),n.imply("millisecond",t.get("millisecond")))):(n.imply("hour",t.get("hour")),n.imply("minute",t.get("minute")),n.imply("second",t.get("second")),n.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&n.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?n.assign("meridiem",t.get("meridiem")):null!=t.get("meridiem")&&null==n.get("meridiem")&&n.imply("meridiem",t.get("meridiem")),n.get("meridiem")==i.PM&&n.get("hour")<12&&(t.isCertain("hour")?n.assign("hour",n.get("hour")+12):n.imply("hour",n.get("hour")+12)),n.addTags(e.tags()),n.addTags(t.tags()),n}class $e extends ye{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&null!=e.match(this.patternBetween())}mergeResults(e,t,n){const r=t.start.isOnlyDate()?Me(t,n):Me(n,t);return r.index=t.index,r.text=t.text+e+n.text,r}}class Ae extends $e{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.|∙|:)?\\s*$")}}const Pe=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class Ce{timezoneOverrides;constructor(e){this.timezoneOverrides=e}refine(e,t){const n=e.option.timezones??{};return t.forEach(t=>{const r=e.text.substring(t.index+t.text.length),s=Pe.exec(r);if(!s)return;const a=s[1].toUpperCase(),i=t.start.date()??t.refDate??new Date,o={...this.timezoneOverrides,...n},d=g(a,i,o);if(null==d)return;e.debug(()=>{console.log(`Extracting timezone: '${a}' into: ${d} for: ${t.start}`)});const u=t.start.get("timezoneOffset");if(null!==u&&d!=u){if(t.start.isCertain("timezoneOffset"))return;if(a!=s[1])return}t.start.isOnlyDate()&&a!=s[1]||(t.text+=s[0],t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",d),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",d))}),t}}const Re=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i");class Se{refine(e,t){return t.forEach(function(t){if(t.start.isCertain("timezoneOffset"))return;const n=e.text.substring(t.index+t.text.length),r=Re.exec(n);if(!r)return;e.debug(()=>{console.log(`Extracting timezone: '${r[0]}' into : ${t}`)});let s=60*parseInt(r[2])+parseInt(r[3]||"0");s>840||("-"===r[1]&&(s=-s),null!=t.end&&t.end.assign("timezoneOffset",s),t.start.assign("timezoneOffset",s),t.text+=r[0])}),t}}class Ee{refine(e,t){if(t.length<2)return t;const n=[];let r=t[0];for(let s=1;s<t.length;s++){const a=t[s];if(a.index>=r.index+r.text.length){n.push(r),r=a;continue}let i=null,o=null;a.text.length>r.text.length?(i=a,o=r):(i=r,o=a),e.debug(()=>{console.log(`${this.constructor.name} remove ${o} by ${i}`)}),r=i}return null!=r&&n.push(r),n}}class be{refine(e,t){return e.option.forwardDate?(t.forEach(t=>{let n=c(e.reference.getDateWithAdjustedTimezone());if(t.start.isOnlyTime()&&e.reference.instant>t.start.date()){const n=e.reference.getDateWithAdjustedTimezone(),r=new Date(n);r.setDate(r.getDate()+1),h(t.start,r),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} time from the ref date (${n}) to the following day (${r})`)}),t.end&&t.end.isOnlyTime()&&(h(t.end,r),t.start.date()>t.end.date()&&(r.setDate(r.getDate()+1),h(t.end,r)))}if(t.start.isOnlyWeekdayComponent()&&n.isAfter(t.start.dayjs())&&(n=n.day()>=t.start.get("weekday")?n.day(t.start.get("weekday")+7):n.day(t.start.get("weekday")),t.start.imply("day",n.date()),t.start.imply("month",n.month()+1),t.start.imply("year",n.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.start})`)}),t.end&&t.end.isOnlyWeekdayComponent()&&(n=n.day()>t.end.get("weekday")?n.day(t.end.get("weekday")+7):n.day(t.end.get("weekday")),t.end.imply("day",n.date()),t.end.imply("month",n.month()+1),t.end.imply("year",n.year()),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.end})`)}))),t.start.isDateWithUnknownYear()&&n.isAfter(t.start.dayjs()))for(let r=0;r<3&&n.isAfter(t.start.dayjs());r++)t.start.imply("year",t.start.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} year (${t.start})`)}),t.end&&!t.end.isCertain("year")&&(t.end.imply("year",t.end.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} month (${t.start})`)}))}),t):t}}class ke extends fe{strictMode;constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):!this.strictMode||this.isStrictModeValid(e,t):(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return!t.start.isOnlyWeekdayComponent()||(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1)}}const Oe=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i");class Ne extends B{innerPattern(){return Oe}innerExtract(e,t){const n=e.createParsingComponents({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])});if(null!=t[4]&&(n.assign("hour",parseInt(t[4])),n.assign("minute",parseInt(t[5])),null!=t[6]&&n.assign("second",parseInt(t[6])),null!=t[7]&&n.assign("millisecond",parseInt(t[7])),null!=t[8])){let e=0;if(t[9]){const n=parseInt(t[9]);let r=0;null!=t[10]&&(r=parseInt(t[10])),e=60*n,e<0?e-=r:e+=r}n.assign("timezoneOffset",e)}return n.addTag("parser/ISOFormatParser")}}class je extends ye{mergeResults(e,t,n){const r=n.clone();return r.index=t.index,r.text=t.text+e+r.text,r.start.assign("weekday",t.start.get("weekday")),r.end&&r.end.assign("weekday",t.start.get("weekday")),r}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&null!=e.match(/^,?\s*$/)}}function ve(e,t=!1){return e.parsers.unshift(new Ne),e.refiners.unshift(new je),e.refiners.unshift(new Se),e.refiners.unshift(new Ee),e.refiners.push(new Ce),e.refiners.push(new Ee),e.refiners.push(new be),e.refiners.push(new ke(t)),e}function Fe(e){const t=c(e.getDateWithAdjustedTimezone()),n=new x(e,{});return we(n,t),Te(n,t),n.addTag("casualReference/today"),n}function We(e){return function(e){return Ye(e,-1)}(e).addTag("casualReference/yesterday")}function Ie(e){return Ye(e,1).addTag("casualReference/tomorrow")}function Ye(e,t){let n=c(e.getDateWithAdjustedTimezone());const r=new x(e,{});return n=n.add(t,"day"),we(r,n),Te(r,n),r}const ze=/(now|today|tonight|tomorrow|overmorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class Ue extends B{innerPattern(e){return ze}innerExtract(e,t){let n=c(e.refDate);const r=t[0].toLowerCase();let s=e.createParsingComponents();switch(r){case"now":s=function(e){const t=c(e.getDateWithAdjustedTimezone()),n=new x(e,{});return we(n,t),function(e,t){e.assign("hour",t.hour()),e.assign("minute",t.minute()),e.assign("second",t.second()),e.assign("millisecond",t.millisecond()),e.get("hour")<12?e.assign("meridiem",i.AM):e.assign("meridiem",i.PM)}(n,t),n.assign("timezoneOffset",e.getTimezoneOffset()),n.addTag("casualReference/now"),n}(e.reference);break;case"today":s=Fe(e.reference);break;case"yesterday":s=We(e.reference);break;case"tomorrow":case"tmr":case"tmrw":s=Ie(e.reference);break;case"tonight":s=function(e,t=22){const n=c(e.getDateWithAdjustedTimezone()),r=new x(e,{});return we(r,n),r.imply("hour",t),r.imply("meridiem",i.PM),r.addTag("casualReference/tonight"),r}(e.reference);break;case"overmorrow":s=Ye(e.reference,2);break;default:r.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),we(s,n),s.imply("hour",0))}return s.addTag("parser/ENCasualDateParser"),s}}const Le=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class Ve extends B{innerPattern(){return Le}innerExtract(e,t){let n=null;switch(t[1].toLowerCase()){case"afternoon":n=function(e,t=15){const n=new x(e,{});return n.imply("meridiem",i.PM),n.imply("hour",t),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n.addTag("casualReference/afternoon"),n}(e.reference);break;case"evening":case"night":n=function(e,t=20){const n=new x(e,{});return n.imply("meridiem",i.PM),n.imply("hour",t),n.addTag("casualReference/evening"),n}(e.reference);break;case"midnight":n=function(e){const t=new x(e,{}),n=c(e.getDateWithAdjustedTimezone());return n.hour()>2&&function(e,t){xe(e,t=t.add(1,"day")),Te(e,t)}(t,n),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/midnight"),t}(e.reference);break;case"morning":n=function(e,t=6){const n=new x(e,{});return n.imply("meridiem",i.AM),n.imply("hour",t),n.imply("minute",0),n.imply("second",0),n.imply("millisecond",0),n.addTag("casualReference/morning"),n}(e.reference);break;case"noon":case"midday":n=function(e){const t=new x(e,{});return t.imply("meridiem",i.AM),t.assign("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/noon"),t}(e.reference)}return n&&n.addTag("parser/ENCasualTimeParser"),n}}function He(e,t,n){const r=function(e,t,n){const r=e.getDay();switch(n){case"this":return Be(e,t);case"last":return _e(e,t);case"next":return r==o.SUNDAY?t==o.SUNDAY?7:t:r==o.SATURDAY?t==o.SATURDAY?7:t==o.SUNDAY?8:1+t:t<r&&t!=o.SUNDAY?Be(e,t):Be(e,t)+7}return function(e,t){const n=_e(e,t),r=Be(e,t);return r<-n?r:n}(e,t)}(e.getDateWithAdjustedTimezone(),t,n);let s=new x(e);return s=function(e,t){const n=e.clone();let r=e.dayjs();for(const e in t)r=r.add(t[e],e);return("day"in t||"d"in t||"week"in t||"month"in t||"year"in t)&&(n.imply("day",r.date()),n.imply("month",r.month()+1),n.imply("year",r.year())),("second"in t||"minute"in t||"hour"in t)&&(n.imply("second",r.second()),n.imply("minute",r.minute()),n.imply("hour",r.hour())),n}(s,{day:r}),s.assign("weekday",t),s}function Be(e,t){let n=t-e.getDay();return n<0&&(n+=7),n}function _e(e,t){let n=t-e.getDay();return n>=0&&(n-=7),n}const Ge=new RegExp(`(?:(?:\\,|\\(|\\（)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${D(P)}|weekend|weekday)(?:\\s*(?:\\,|\\)|\\）))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i");class Ke extends B{innerPattern(){return Ge}innerExtract(e,t){const n=t[1],r=t[3];let s=n||r;s=s||"",s=s.toLowerCase();let a=null;"last"==s||"past"==s?a="last":"next"==s?a="next":"this"==s&&(a="this");const i=t[2].toLowerCase();let d;if(void 0!==P[i])d=P[i];else if("weekend"==i)d="last"==a?o.SUNDAY:o.SATURDAY;else{if("weekday"!=i)return null;{const t=e.reference.getDateWithAdjustedTimezone().getDay();t==o.SUNDAY||t==o.SATURDAY?d="last"==a?o.FRIDAY:o.MONDAY:(d=t-1,d="last"==a?d-1:d+1,d=d%5+1)}}return He(e.reference,d,a)}}const Je=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${D(k)})(?=\\s*)(?=\\W|$)`,"i");class Ze extends B{innerPattern(){return Je}innerExtract(e,t){const n=t[1].toLowerCase(),r=t[2].toLowerCase(),s=k[r];if("next"==n||n.startsWith("after")){const t={};return t[s]=1,x.createRelativeFromReference(e.reference,t)}if("last"==n||"past"==n){const t={};return t[s]=-1,x.createRelativeFromReference(e.reference,t)}const a=e.createParsingComponents();let i=c(e.reference.instant);return r.match(/week/i)?(i=i.add(-i.get("d"),"d"),a.imply("day",i.date()),a.imply("month",i.month()+1),a.imply("year",i.year())):r.match(/month/i)?(i=i.add(1-i.date(),"d"),a.imply("day",i.date()),a.assign("year",i.year()),a.assign("month",i.month()+1)):r.match(/year/i)&&(i=i.add(1-i.date(),"d"),i=i.add(-i.month(),"month"),a.imply("day",i.date()),a.imply("month",i.month()+1),a.assign("year",i.year())),a}}const qe=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i");class Qe{groupNumberMonth;groupNumberDay;constructor(e){this.groupNumberMonth=e?3:2,this.groupNumberDay=e?2:3}pattern(){return qe}extract(e,t){const n=t.index+t[1].length,r=t.index+t[0].length-t[5].length;if(n>0&&e.text.substring(0,n).match("\\d/?$"))return;if(r<e.text.length&&e.text.substring(r).match("^/?\\d"))return;const s=e.text.substring(n,r);if(s.match(/^\d\.\d$/)||s.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/))return;if(!t[4]&&s.indexOf("/")<0)return;const a=e.createParsingResult(n,s);let i=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((i<1||i>12)&&i>12){if(!(o>=1&&o<=12&&i<=31))return null;[o,i]=[i,o]}if(o<1||o>31)return null;if(a.start.assign("day",o),a.start.assign("month",i),t[4]){const e=$(parseInt(t[4]));a.start.assign("year",e)}else{const t=A(e.refDate,o,i);a.start.imply("year",t)}return a.addTag("parser/SlashDateFormatParser")}}const Xe=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${U})(?=\\W|$)`,"i"),et=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${L})(?=\\W|$)`,"i");class tt extends B{allowAbbreviations;constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?Xe:et}innerExtract(e,t){const n=t[1].toLowerCase();let r=V(t[2]);if(!r)return null;switch(n){case"last":case"past":case"-":r=p(r)}return x.createRelativeFromReference(e.reference,r)}}function nt(e){return null!=e.text.match(/^-/i)}class rt extends ye{shouldMergeResults(e,t,n){return!!e.match(/^\s*$/i)&&(null!=n.text.match(/^[+-]/i)||nt(n))}mergeResults(e,t,n,r){let s=V(n.text);nt(n)&&(s=function(e){const t={};for(const n in e)t[n]=-e[n];return t}(s));const a=x.createRelativeFromReference(new w(t.start.date()),s);return new T(t.reference,t.index,`${t.text}${e}${n.text}`,a)}}function st(e){return null!=e.text.match(/\s+(before|from)$/i)}class at extends ye{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!(!e.match(this.patternBetween())||!st(t)&&(r=t,null==r.text.match(/\s+(after|since)$/i))||!n.start.get("day")||!n.start.get("month")||!n.start.get("year"));var r}mergeResults(e,t,n){let r=V(t.text);st(t)&&(r=p(r));const s=x.createRelativeFromReference(new w(n.start.date()),r);return new T(n.reference,t.index,`${t.text}${e}${n.text}`,s)}}const it=new RegExp(`^\\s*(${v})`,"i");class ot{refine(e,t){return t.forEach(function(t){if(!t.start.isDateWithUnknownYear())return;const n=e.text.substring(t.index+t.text.length),r=it.exec(n);if(!r)return;if(r[0].trim().length<=3)return;e.debug(()=>{console.log(`Extracting year: '${r[0]}' into : ${t}`)});const s=F(r[1]);null!=t.end&&t.end.assign("year",s),t.start.assign("year",s),t.text+=r[0]}),t}}class dt extends fe{constructor(){super()}isValid(e,t){const n=t.text.trim();return n===e.text.trim()||("may"!==n.toLowerCase()||e.text.substring(0,t.index).trim().match(/\b(in)$/i)?!n.toLowerCase().endsWith("the second")||(e.text.substring(t.index+t.text.length).trim().length>0&&e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1):(e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1))}}class ut{createCasualConfiguration(e=!1){const t=this.createConfiguration(!1,e);return t.parsers.push(new Ue),t.parsers.push(new Ve),t.parsers.push(new te),t.parsers.push(new Ze),t.parsers.push(new tt),t.refiners.push(new dt),t}createConfiguration(e=!0,t=!1){const n=ve({parsers:[new Qe(t),new J(e),new q,new X(t),new Ke,new ae,new oe(e),new le(e),new me(e)],refiners:[new Ae]},e);return n.parsers.unshift(new re(e)),n.refiners.unshift(new at),n.refiners.unshift(new rt),n.refiners.unshift(new Ee),n.refiners.push(new Ae),n.refiners.push(new ot),n.refiners.push(new pe),n}}class lt{parsers;refiners;defaultConfig=new ut;constructor(e){e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new lt({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){const r=this.parse(e,t,n);return r.length>0?r[0].start.date():null}parse(e,t,n){const r=new ct(e,t,n);let s=[];return this.parsers.forEach(e=>{const t=lt.executeParser(r,e);s=s.concat(t)}),s.sort((e,t)=>e.index-t.index),this.refiners.forEach(function(e){s=e.refine(r,s)}),s}static executeParser(e,t){const n=[],r=t.pattern(e),s=e.text;let a=e.text,i=r.exec(a);for(;i;){const o=i.index+s.length-a.length;i.index=o;const d=t.extract(e,i);if(!d){a=s.substring(i.index+1),i=r.exec(a);continue}let u=null;d instanceof T?u=d:d instanceof x?(u=e.createParsingResult(i.index,i[0]),u.start=d):u=e.createParsingResult(i.index,i[0],d);const l=u.index,c=u.text;e.debug(()=>console.log(`${t.constructor.name} extracted (at index=${l}) '${c}'`)),n.push(u),a=s.substring(l+c.length),i=r.exec(a)}return n}}class ct{text;option;reference;refDate;constructor(e,t,n){this.text=e,this.reference=new w(t),this.option=n??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof x?e:new x(this.reference,e)}createParsingResult(e,t,n,r){const s="string"==typeof t?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,i=r?this.createParsingComponents(r):null;return new T(this.reference,e,s,a,i)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}const ht=new ut,mt=new lt(ht.createCasualConfiguration(!1)),ft=new lt(ht.createConfiguration(!0,!1)),yt=new lt(ht.createCasualConfiguration(!0));function gt(e,t,n){return mt.parse(e,t,n)}function pt(e,t,n){return mt.parseDate(e,t,n)}const wt=mt,xt={零:0,〇:0,一:1,二:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10},Tt={日:0,月:1,火:2,水:3,木:4,金:5,土:6};function Mt(e){return String(e).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"¥").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,Dt)}function Dt(e){return String.fromCharCode(e.charCodeAt(0)-65248)}function $t(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"十"===r?t=0===t?xt[r]:t*xt[r]:t+=xt[r]}return t}const At=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i;class Pt{pattern(){return At}extract(e,t){const n=parseInt(Mt(t[5])),r=parseInt(Mt(t[6])),s=e.createParsingComponents({day:r,month:n});if(t[1]&&t[1].match("同|今|本")){const t=c(e.refDate);s.assign("year",t.year())}if(t[2]){const e=t[4];let n="元"==e?1:parseInt(Mt(e));"令和"==t[3]?n+=2018:"平成"==t[3]?n+=1988:"昭和"==t[3]&&(n+=1925),s.assign("year",n)}else{const t=A(e.refDate,r,n);s.imply("year",t)}return s}}class Ct extends ge{patternBetween(){return/^\s*(から|－|ー|-|～|~)\s*$/i}}const Rt=/今日|きょう|本日|ほんじつ|昨日|きのう|明日|あした|今夜|こんや|今夕|こんゆう|今晩|こんばん|今朝|けさ/i;class St{pattern(){return Rt}extract(e,t){const n=function(e){switch(e){case"きょう":return"今日";case"ほんじつ":return"本日";case"きのう":return"昨日";case"あした":return"明日";case"こんや":return"今夜";case"こんゆう":return"今夕";case"こんばん":return"今晩";case"けさ":return"今朝";default:return e}}(t[0]),r=c(e.refDate),s=e.createParsingComponents();switch(n){case"昨日":return We(e.reference);case"明日":return Ie(e.reference);case"本日":case"今日":return Fe(e.reference)}return"今夜"==n||"今夕"==n||"今晩"==n?(s.imply("hour",22),s.assign("meridiem",i.PM)):n.match("今朝")&&(s.imply("hour",6),s.assign("meridiem",i.AM)),s.assign("day",r.date()),s.assign("month",r.month()+1),s.assign("year",r.year()),s}}const Et=new RegExp("((?<prefix>前の|次の|今週))?(?<weekday>"+Object.keys(Tt).join("|")+")(?:曜日|曜)","i");class bt{pattern(){return Et}extract(e,t){const n=t.groups.weekday,r=Tt[n];if(void 0===r)return null;const s=t.groups.prefix||"";let a=null;return s.match(/前の/)?a="last":s.match(/次の/)?a="next":s.match(/今週/)&&(a="this"),He(e.reference,r,a)}}const kt=new RegExp("([0-9０-９]{4}[\\/|\\／])?([0-1０-１]{0,1}[0-9０-９]{1})(?:[\\/|\\／]([0-3０-３]{0,1}[0-9０-９]{1}))","i");class Ot{pattern(){return kt}extract(e,t){const n=e.createParsingComponents(),r=parseInt(Mt(t[2])),s=parseInt(Mt(t[3]));if(r<1||r>12)return null;if(s<1||s>31)return null;if(n.assign("day",s),n.assign("month",r),t[1]){const e=$(parseInt(Mt(t[1])));n.assign("year",e)}else{const t=A(e.reference.instant,s,r);n.imply("year",t)}return n}}const Nt=new RegExp("(?:(午前|午後|A.M.|P.M.|AM|PM))?(?:[\\s,，、]*)(?:([0-9０-９]+|["+Object.keys(xt).join("")+"]+)(?:\\s*)(?:時|:|：)(?:\\s*)([0-9０-９]+|半|["+Object.keys(xt).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)([0-9０-９]+|["+Object.keys(xt).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),jt=new RegExp("(?:^\\s*(?:から|\\-|\\–|\\－|\\~|\\〜)\\s*)(?:(午前|午後|A.M.|P.M.|AM|PM))?(?:[\\s,，、]*)(?:([0-9０-９]+|["+Object.keys(xt).join("")+"]+)(?:\\s*)(?:時|:|：)(?:\\s*)([0-9０-９]+|半|["+Object.keys(xt).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)([0-9０-９]+|["+Object.keys(xt).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i");class vt extends B{innerPattern(){return Nt}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;const n=e.createParsingResult(t.index,t[0]);let r=0,s=0,a=-1;if(t[4]){let e=parseInt(Mt(t[4]));if(isNaN(e)&&(e=$t(t[4])),e>=60)return null;n.start.assign("second",e)}if(r=parseInt(Mt(t[2])),isNaN(r)&&(r=$t(t[2])),t[3]?"半"===t[3]?s=30:(s=parseInt(Mt(t[3])),isNaN(s)&&(s=$t(t[3]))):r>100&&(s=r%100,r=Math.floor(r/100)),s>=60)return null;if(r>24)return null;if(r>=12&&(a=i.PM),t[1]){if(r>12)return null;const e=t[1],n=e[0].toLowerCase();"午前"===e||"a"===n?(a=i.AM,12===r&&(r=0)):"午後"!==e&&"p"!==n||(a=i.PM,12!=r&&(r+=12))}else if(t[5]){if(r>12)return null;const e=t[5][0].toLowerCase();"a"===e&&(a=i.AM,12===r&&(r=0)),"p"===e&&(a=i.PM,12!=r&&(r+=12))}if(n.start.assign("hour",r),n.start.assign("minute",s),a>=0?n.start.assign("meridiem",a):r<12?n.start.imply("meridiem",0):n.start.imply("meridiem",1),!(t=jt.exec(e.text.substring(n.index+n.text.length))))return n.text.match(/^\d+$/)?null:n;if(n.end=e.createParsingComponents(),r=0,s=0,a=-1,t[4]){let e=parseInt(Mt(t[4]));if(isNaN(e)&&(e=$t(t[4])),e>=60)return null;n.end.assign("second",e)}if(r=parseInt(Mt(t[2])),isNaN(r)&&(r=$t(t[2])),t[3]?"半"===t[3]?s=30:(s=parseInt(Mt(t[3])),isNaN(s)&&(s=$t(t[3]))):r>100&&(s=r%100,r=Math.floor(r/100)),s>=60)return null;if(r>24)return null;if(r>=12&&(a=i.PM),t[1]){if(r>12)return null;const e=t[1],s=e[0].toLowerCase();"午前"===e||"a"===s?(a=i.AM,12===r&&(r=0)):"午後"!==e&&"p"!==s||(a=i.PM,12!=r&&(r+=12)),n.start.isCertain("meridiem")||(a===i.AM?(n.start.imply("meridiem",i.AM),12===n.start.get("hour")&&n.start.assign("hour",0)):(n.start.imply("meridiem",1),12!=n.start.get("hour")&&n.start.assign("hour",n.start.get("hour")+12)))}else if(t[5]){if(r>12)return null;const e=t[5][0].toLowerCase();"a"===e&&(a=i.AM,12===r&&(r=0)),"p"===e&&(a=i.PM,12!=r&&(r+=12))}return n.text=n.text+t[0],n.end.assign("hour",r),n.end.assign("minute",s),a>=0?n.end.assign("meridiem",a):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>r?n.end.imply("meridiem",i.AM):r<=12&&(n.end.assign("hour",r+12),n.end.assign("meridiem",i.PM)):r>12?n.end.imply("meridiem",i.PM):r<=12&&n.end.imply("meridiem",i.AM),n.end.date().getTime()<n.start.date().getTime()&&n.end.imply("day",n.end.get("day")+1),n}}class Ft extends $e{patternBetween(){return/^\s*(の)?\s*$/i}}class Wt extends ye{mergeResults(e,t,n){const r=t.clone();return r.text=t.text+e+n.text,r.start.assign("weekday",n.start.get("weekday")),r.end&&r.end.assign("weekday",n.start.get("weekday")),r}shouldMergeResults(e,t,n){return t.start.isCertain("day")&&n.start.isOnlyWeekdayComponent()&&!n.start.isCertain("hour")&&null!==e.match(/^[,、の]?\s*$/)}}const It=new RegExp("(?:\\(|\\（)(?<weekday>"+Object.keys(Tt).join("|")+")(?:\\)|\\）)","i");class Yt{pattern(){return It}extract(e,t){const n=t.groups.weekday,r=Tt[n];return void 0===r?null:He(e.reference,r)}}const zt=new lt(Ht()),Ut=new lt(Bt(!0));function Lt(e,t,n){return zt.parse(e,t,n)}function Vt(e,t,n){return zt.parseDate(e,t,n)}function Ht(){const e=Bt(!1);return e.parsers.unshift(new St),e}function Bt(e=!0){const t=ve({parsers:[new Pt,new bt,new Yt,new Ot,new vt],refiners:[new Wt,new Ft,new Ct]},e);return t.refiners=t.refiners.filter(e=>!(e instanceof je)),t}const _t={零:0,〇:0,一:1,二:2,两:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10},Gt={天:0,日:0,一:1,二:2,三:3,四:4,五:5,六:6};function Kt(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"十"===r?t=0===t?_t[r]:t*_t[r]:t+=_t[r]}return t}class Jt extends B{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(_t).join("")+"]{4}|["+Object.keys(_t).join("")+"]{2})?(?:\\s*)(?:年)?(?:[\\s|,|，]*)(\\d{1,2}|["+Object.keys(_t).join("")+"]{1,3})(?:\\s*)(?:月)(?:\\s*)(\\d{1,2}|["+Object.keys(_t).join("")+"]{1,3})?(?:\\s*)(?:日|号)?")}innerExtract(e,t){const n=c(e.refDate),r=e.createParsingResult(t.index,t[0]);let s=parseInt(t[2]);if(isNaN(s)&&(s=Kt(t[2])),r.start.assign("month",s),t[3]){let e=parseInt(t[3]);isNaN(e)&&(e=Kt(t[3])),r.start.assign("day",e)}else r.start.imply("day",n.date());if(t[1]){let e=parseInt(t[1]);isNaN(e)&&(e=function(e){let t="";for(let n=0;n<e.length;n++){const r=e[n];t+=_t[r]}return parseInt(t)}(t[1])),r.start.assign("year",e)}else r.start.imply("year",n.year());return r}}const Zt=new RegExp("(\\d+|["+Object.keys(_t).join("")+"]+|半|几)(?:\\s*)(?:个)?(秒(?:钟)?|分钟|小时|钟|日|天|星期|礼拜|月|年)(?:(?:之|过)?后|(?:之)?内)","i");class qt extends B{innerPattern(){return Zt}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]);let r=parseInt(t[1]);if(isNaN(r)&&(r=Kt(t[1])),isNaN(r)){const e=t[1];if("几"===e)r=3;else{if("半"!==e)return null;r=.5}}let s=c(e.refDate);const a=t[2][0];return a.match(/[日天星礼月年]/)?("日"==a||"天"==a?s=s.add(r,"d"):"星"==a||"礼"==a?s=s.add(7*r,"d"):"月"==a?s=s.add(r,"month"):"年"==a&&(s=s.add(r,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):("秒"==a?s=s.add(r,"second"):"分"==a?s=s.add(r,"minute"):"小"!=a&&"钟"!=a||(s=s.add(r,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}}const Qt=new RegExp("(?<prefix>上|下|这)(?:个)?(?:星期|礼拜|周)(?<weekday>"+Object.keys(Gt).join("|")+")");class Xt extends B{innerPattern(){return Qt}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]),r=t.groups.weekday,s=Gt[r];if(void 0===s)return null;let a=null;const i=t.groups.prefix;"上"==i?a="last":"下"==i?a="next":"这"==i&&(a="this");let o=c(e.refDate),d=!1;const u=o.day();return"last"==a||"past"==a?(o=o.day(s-7),d=!0):"next"==a?(o=o.day(s+7),d=!0):o="this"==a?o.day(s):Math.abs(s-7-u)<Math.abs(s-u)?o.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?o.day(s+7):o.day(s),n.start.assign("weekday",s),d?(n.start.assign("day",o.date()),n.start.assign("month",o.month()+1),n.start.assign("year",o.year())):(n.start.imply("day",o.date()),n.start.imply("month",o.month()+1),n.start.imply("year",o.year())),n}}const en=new RegExp("(?:从|自)?(?:(今|明|前|大前|后|大后|昨)(早|朝|晚)|(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|后|大后|昨)(?:日|天)(?:[\\s,，]*)(?:(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(_t).join("")+"]+)(?:\\s*)(?:点|时|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(_t).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(_t).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),tn=new RegExp("(?:^\\s*(?:到|至|\\-|\\–|\\~|\\〜)\\s*)(?:(今|明|前|大前|后|大后|昨)(早|朝|晚)|(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|后|大后|昨)(?:日|天)(?:[\\s,，]*)(?:(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(_t).join("")+"]+)(?:\\s*)(?:点|时|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(_t).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(_t).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i");class nn extends B{innerPattern(){return en}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;const n=c(e.refDate),r=e.createParsingResult(t.index,t[0]);let s=n.clone();if(t[1]){const e=t[1];"明"==e?n.hour()>1&&(s=s.add(1,"day")):"昨"==e?s=s.add(-1,"day"):"前"==e?s=s.add(-2,"day"):"大前"==e?s=s.add(-3,"day"):"后"==e?s=s.add(2,"day"):"大后"==e&&(s=s.add(3,"day")),r.start.assign("day",s.date()),r.start.assign("month",s.month()+1),r.start.assign("year",s.year())}else if(t[4]){const e=t[4];"明"==e?s=s.add(1,"day"):"昨"==e?s=s.add(-1,"day"):"前"==e?s=s.add(-2,"day"):"大前"==e?s=s.add(-3,"day"):"后"==e?s=s.add(2,"day"):"大后"==e&&(s=s.add(3,"day")),r.start.assign("day",s.date()),r.start.assign("month",s.month()+1),r.start.assign("year",s.year())}else r.start.imply("day",s.date()),r.start.imply("month",s.month()+1),r.start.imply("year",s.year());let a=0,i=0,o=-1;if(t[8]){let e=parseInt(t[8]);if(isNaN(e)&&(e=Kt(t[8])),e>=60)return null;r.start.assign("second",e)}if(a=parseInt(t[6]),isNaN(a)&&(a=Kt(t[6])),t[7]?"半"==t[7]?i=30:"正"==t[7]||"整"==t[7]?i=0:(i=parseInt(t[7]),isNaN(i)&&(i=Kt(t[7]))):a>100&&(i=a%100,a=Math.floor(a/100)),i>=60)return null;if(a>24)return null;if(a>=12&&(o=1),t[9]){if(a>12)return null;const e=t[9][0].toLowerCase();"a"==e&&(o=0,12==a&&(a=0)),"p"==e&&(o=1,12!=a&&(a+=12))}else if(t[2]){const e=t[2][0];"早"==e?(o=0,12==a&&(a=0)):"晚"==e&&(o=1,12!=a&&(a+=12))}else if(t[3]){const e=t[3][0];"上"==e||"早"==e||"凌"==e?(o=0,12==a&&(a=0)):"下"!=e&&"晚"!=e||(o=1,12!=a&&(a+=12))}else if(t[5]){const e=t[5][0];"上"==e||"早"==e||"凌"==e?(o=0,12==a&&(a=0)):"下"!=e&&"晚"!=e||(o=1,12!=a&&(a+=12))}if(r.start.assign("hour",a),r.start.assign("minute",i),o>=0?r.start.assign("meridiem",o):a<12?r.start.imply("meridiem",0):r.start.imply("meridiem",1),!(t=tn.exec(e.text.substring(r.index+r.text.length))))return r.text.match(/^\d+$/)?null:r;let d=s.clone();if(r.end=e.createParsingComponents(),t[1]){const e=t[1];"明"==e?n.hour()>1&&(d=d.add(1,"day")):"昨"==e?d=d.add(-1,"day"):"前"==e?d=d.add(-2,"day"):"大前"==e?d=d.add(-3,"day"):"后"==e?d=d.add(2,"day"):"大后"==e&&(d=d.add(3,"day")),r.end.assign("day",d.date()),r.end.assign("month",d.month()+1),r.end.assign("year",d.year())}else if(t[4]){const e=t[4];"明"==e?d=d.add(1,"day"):"昨"==e?d=d.add(-1,"day"):"前"==e?d=d.add(-2,"day"):"大前"==e?d=d.add(-3,"day"):"后"==e?d=d.add(2,"day"):"大后"==e&&(d=d.add(3,"day")),r.end.assign("day",d.date()),r.end.assign("month",d.month()+1),r.end.assign("year",d.year())}else r.end.imply("day",d.date()),r.end.imply("month",d.month()+1),r.end.imply("year",d.year());if(a=0,i=0,o=-1,t[8]){let e=parseInt(t[8]);if(isNaN(e)&&(e=Kt(t[8])),e>=60)return null;r.end.assign("second",e)}if(a=parseInt(t[6]),isNaN(a)&&(a=Kt(t[6])),t[7]?"半"==t[7]?i=30:"正"==t[7]||"整"==t[7]?i=0:(i=parseInt(t[7]),isNaN(i)&&(i=Kt(t[7]))):a>100&&(i=a%100,a=Math.floor(a/100)),i>=60)return null;if(a>24)return null;if(a>=12&&(o=1),t[9]){if(a>12)return null;const e=t[9][0].toLowerCase();"a"==e&&(o=0,12==a&&(a=0)),"p"==e&&(o=1,12!=a&&(a+=12)),r.start.isCertain("meridiem")||(0==o?(r.start.imply("meridiem",0),12==r.start.get("hour")&&r.start.assign("hour",0)):(r.start.imply("meridiem",1),12!=r.start.get("hour")&&r.start.assign("hour",r.start.get("hour")+12)))}else if(t[2]){const e=t[2][0];"早"==e?(o=0,12==a&&(a=0)):"晚"==e&&(o=1,12!=a&&(a+=12))}else if(t[3]){const e=t[3][0];"上"==e||"早"==e||"凌"==e?(o=0,12==a&&(a=0)):"下"!=e&&"晚"!=e||(o=1,12!=a&&(a+=12))}else if(t[5]){const e=t[5][0];"上"==e||"早"==e||"凌"==e?(o=0,12==a&&(a=0)):"下"!=e&&"晚"!=e||(o=1,12!=a&&(a+=12))}return r.text=r.text+t[0],r.end.assign("hour",a),r.end.assign("minute",i),o>=0?r.end.assign("meridiem",o):r.start.isCertain("meridiem")&&1==r.start.get("meridiem")&&r.start.get("hour")>a?r.end.imply("meridiem",0):a>12&&r.end.imply("meridiem",1),r.end.date().getTime()<r.start.date().getTime()&&r.end.imply("day",r.end.get("day")+1),r}}const rn=new RegExp("(?:星期|礼拜|周)(?<weekday>"+Object.keys(Gt).join("|")+")");class sn extends B{innerPattern(){return rn}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]),r=t.groups.weekday,s=Gt[r];if(void 0===s)return null;let a=c(e.refDate);const i=a.day();return a=Math.abs(s-7-i)<Math.abs(s-i)?a.day(s-7):Math.abs(s+7-i)<Math.abs(s-i)?a.day(s+7):a.day(s),n.start.assign("weekday",s),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year()),n}}class an extends B{innerPattern(e){return new RegExp("(而家|立(?:刻|即)|即刻)|(今|明|前|大前|後|大後|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|後|大後|聽|昨|尋|琴)(?:日|天)(?:[\\s|,|，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?","i")}innerExtract(e,t){const n=t.index,r=e.createParsingResult(n,t[0]),s=c(e.refDate);let a=s;if(t[1])r.start.imply("hour",s.hour()),r.start.imply("minute",s.minute()),r.start.imply("second",s.second()),r.start.imply("millisecond",s.millisecond());else if(t[2]){const e=t[2],n=t[3];"明"==e||"聽"==e?s.hour()>1&&(a=a.add(1,"day")):"昨"==e||"尋"==e||"琴"==e?a=a.add(-1,"day"):"前"==e?a=a.add(-2,"day"):"大前"==e?a=a.add(-3,"day"):"後"==e?a=a.add(2,"day"):"大後"==e&&(a=a.add(3,"day")),"早"==n||"朝"==n?r.start.imply("hour",6):"晚"==n&&(r.start.imply("hour",22),r.start.imply("meridiem",1))}else if(t[4]){const e=t[4][0];"早"==e||"朝"==e||"上"==e?r.start.imply("hour",6):"下"==e||"晏"==e?(r.start.imply("hour",15),r.start.imply("meridiem",1)):"中"==e?(r.start.imply("hour",12),r.start.imply("meridiem",1)):"夜"==e||"晚"==e?(r.start.imply("hour",22),r.start.imply("meridiem",1)):"凌"==e&&r.start.imply("hour",0)}else if(t[5]){const e=t[5];"明"==e||"聽"==e?s.hour()>1&&(a=a.add(1,"day")):"昨"==e||"尋"==e||"琴"==e?a=a.add(-1,"day"):"前"==e?a=a.add(-2,"day"):"大前"==e?a=a.add(-3,"day"):"後"==e?a=a.add(2,"day"):"大後"==e&&(a=a.add(3,"day"));const n=t[6];if(n){const e=n[0];"早"==e||"朝"==e||"上"==e?r.start.imply("hour",6):"下"==e||"晏"==e?(r.start.imply("hour",15),r.start.imply("meridiem",1)):"中"==e?(r.start.imply("hour",12),r.start.imply("meridiem",1)):"夜"==e||"晚"==e?(r.start.imply("hour",22),r.start.imply("meridiem",1)):"凌"==e&&r.start.imply("hour",0)}}return r.start.assign("day",a.date()),r.start.assign("month",a.month()+1),r.start.assign("year",a.year()),r}}const on={零:0,一:1,二:2,兩:2,三:3,四:4,五:5,六:6,七:7,八:8,九:9,十:10,廿:20,卅:30},dn={天:0,日:0,一:1,二:2,三:3,四:4,五:5,六:6};function un(e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];"十"===r?t=0===t?on[r]:t*on[r]:t+=on[r]}return t}class ln extends B{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(on).join("")+"]{4}|["+Object.keys(on).join("")+"]{2})?(?:\\s*)(?:年)?(?:[\\s|,|，]*)(\\d{1,2}|["+Object.keys(on).join("")+"]{1,2})(?:\\s*)(?:月)(?:\\s*)(\\d{1,2}|["+Object.keys(on).join("")+"]{1,2})?(?:\\s*)(?:日|號)?")}innerExtract(e,t){const n=c(e.refDate),r=e.createParsingResult(t.index,t[0]);let s=parseInt(t[2]);if(isNaN(s)&&(s=un(t[2])),r.start.assign("month",s),t[3]){let e=parseInt(t[3]);isNaN(e)&&(e=un(t[3])),r.start.assign("day",e)}else r.start.imply("day",n.date());if(t[1]){let e=parseInt(t[1]);isNaN(e)&&(e=function(e){let t="";for(let n=0;n<e.length;n++){const r=e[n];t+=on[r]}return parseInt(t)}(t[1])),r.start.assign("year",e)}else r.start.imply("year",n.year());return r}}const cn=new RegExp("(\\d+|["+Object.keys(on).join("")+"]+|半|幾)(?:\\s*)(?:個)?(秒(?:鐘)?|分鐘|小時|鐘|日|天|星期|禮拜|月|年)(?:(?:之|過)?後|(?:之)?內)","i");class hn extends B{innerPattern(){return cn}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]);let r=parseInt(t[1]);if(isNaN(r)&&(r=un(t[1])),isNaN(r)){const e=t[1];if("幾"===e)r=3;else{if("半"!==e)return null;r=.5}}let s=c(e.refDate);const a=t[2][0];return a.match(/[日天星禮月年]/)?("日"==a||"天"==a?s=s.add(r,"d"):"星"==a||"禮"==a?s=s.add(7*r,"d"):"月"==a?s=s.add(r,"month"):"年"==a&&(s=s.add(r,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):("秒"==a?s=s.add(r,"second"):"分"==a?s=s.add(r,"minute"):"小"!=a&&"鐘"!=a||(s=s.add(r,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}}const mn=new RegExp("(?<prefix>上|今|下|這|呢)(?:個)?(?:星期|禮拜|週)(?<weekday>"+Object.keys(dn).join("|")+")");class fn extends B{innerPattern(){return mn}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]),r=t.groups.weekday,s=dn[r];if(void 0===s)return null;let a=null;const i=t.groups.prefix;"上"==i?a="last":"下"==i?a="next":"今"!=i&&"這"!=i&&"呢"!=i||(a="this");let o=c(e.refDate),d=!1;const u=o.day();return"last"==a||"past"==a?(o=o.day(s-7),d=!0):"next"==a?(o=o.day(s+7),d=!0):o="this"==a?o.day(s):Math.abs(s-7-u)<Math.abs(s-u)?o.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?o.day(s+7):o.day(s),n.start.assign("weekday",s),d?(n.start.assign("day",o.date()),n.start.assign("month",o.month()+1),n.start.assign("year",o.year())):(n.start.imply("day",o.date()),n.start.imply("month",o.month()+1),n.start.imply("year",o.year())),n}}const yn=new RegExp("(?:由|從|自)?(?:(今|明|前|大前|後|大後|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|後|大後|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(on).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(on).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(on).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),gn=new RegExp("(?:^\\s*(?:到|至|\\-|\\–|\\~|\\〜)\\s*)(?:(今|明|前|大前|後|大後|聽|昨|尋|琴)(早|朝|晚)|(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|後|大後|聽|昨|尋|琴)(?:日|天)(?:[\\s,，]*)(?:(上(?:午|晝)|朝(?:早)|早(?:上)|下(?:午|晝)|晏(?:晝)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?)?(?:[\\s,，]*)(?:(\\d+|["+Object.keys(on).join("")+"]+)(?:\\s*)(?:點|時|:|：)(?:\\s*)(\\d+|半|正|整|["+Object.keys(on).join("")+"]+)?(?:\\s*)(?:分|:|：)?(?:\\s*)(\\d+|["+Object.keys(on).join("")+"]+)?(?:\\s*)(?:秒)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i");class pn extends B{innerPattern(){return yn}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;const n=c(e.refDate),r=e.createParsingResult(t.index,t[0]);let s=n.clone();t[1]?("明"==(l=t[1])||"聽"==l?n.hour()>1&&(s=s.add(1,"day")):"昨"==l||"尋"==l||"琴"==l?s=s.add(-1,"day"):"前"==l?s=s.add(-2,"day"):"大前"==l?s=s.add(-3,"day"):"後"==l?s=s.add(2,"day"):"大後"==l&&(s=s.add(3,"day")),r.start.assign("day",s.date()),r.start.assign("month",s.month()+1),r.start.assign("year",s.year())):t[4]?("明"==(h=t[4])||"聽"==h?s=s.add(1,"day"):"昨"==h||"尋"==h||"琴"==h?s=s.add(-1,"day"):"前"==h?s=s.add(-2,"day"):"大前"==h?s=s.add(-3,"day"):"後"==h?s=s.add(2,"day"):"大後"==h&&(s=s.add(3,"day")),r.start.assign("day",s.date()),r.start.assign("month",s.month()+1),r.start.assign("year",s.year())):(r.start.imply("day",s.date()),r.start.imply("month",s.month()+1),r.start.imply("year",s.year()));let a=0,i=0,o=-1;if(t[8]){var d=parseInt(t[8]);if(isNaN(d)&&(d=un(t[8])),d>=60)return null;r.start.assign("second",d)}if(a=parseInt(t[6]),isNaN(a)&&(a=un(t[6])),t[7]?"半"==t[7]?i=30:"正"==t[7]||"整"==t[7]?i=0:(i=parseInt(t[7]),isNaN(i)&&(i=un(t[7]))):a>100&&(i=a%100,a=Math.floor(a/100)),i>=60)return null;if(a>24)return null;if(a>=12&&(o=1),t[9]){if(a>12)return null;"a"==(m=t[9][0].toLowerCase())&&(o=0,12==a&&(a=0)),"p"==m&&(o=1,12!=a&&(a+=12))}else t[2]?"朝"==(f=t[2][0])||"早"==f?(o=0,12==a&&(a=0)):"晚"==f&&(o=1,12!=a&&(a+=12)):t[3]?"上"==(y=t[3][0])||"朝"==y||"早"==y||"凌"==y?(o=0,12==a&&(a=0)):"下"!=y&&"晏"!=y&&"晚"!=y||(o=1,12!=a&&(a+=12)):t[5]&&("上"==(g=t[5][0])||"朝"==g||"早"==g||"凌"==g?(o=0,12==a&&(a=0)):"下"!=g&&"晏"!=g&&"晚"!=g||(o=1,12!=a&&(a+=12)));if(r.start.assign("hour",a),r.start.assign("minute",i),o>=0?r.start.assign("meridiem",o):a<12?r.start.imply("meridiem",0):r.start.imply("meridiem",1),!(t=gn.exec(e.text.substring(r.index+r.text.length))))return r.text.match(/^\d+$/)?null:r;let u=s.clone();var l;if(r.end=e.createParsingComponents(),t[1])"明"==(l=t[1])||"聽"==l?n.hour()>1&&(u=u.add(1,"day")):"昨"==l||"尋"==l||"琴"==l?u=u.add(-1,"day"):"前"==l?u=u.add(-2,"day"):"大前"==l?u=u.add(-3,"day"):"後"==l?u=u.add(2,"day"):"大後"==l&&(u=u.add(3,"day")),r.end.assign("day",u.date()),r.end.assign("month",u.month()+1),r.end.assign("year",u.year());else if(t[4]){var h;"明"==(h=t[4])||"聽"==h?u=u.add(1,"day"):"昨"==h||"尋"==h||"琴"==h?u=u.add(-1,"day"):"前"==h?u=u.add(-2,"day"):"大前"==h?u=u.add(-3,"day"):"後"==h?u=u.add(2,"day"):"大後"==h&&(u=u.add(3,"day")),r.end.assign("day",u.date()),r.end.assign("month",u.month()+1),r.end.assign("year",u.year())}else r.end.imply("day",u.date()),r.end.imply("month",u.month()+1),r.end.imply("year",u.year());if(a=0,i=0,o=-1,t[8]){if(d=parseInt(t[8]),isNaN(d)&&(d=un(t[8])),d>=60)return null;r.end.assign("second",d)}if(a=parseInt(t[6]),isNaN(a)&&(a=un(t[6])),t[7]?"半"==t[7]?i=30:"正"==t[7]||"整"==t[7]?i=0:(i=parseInt(t[7]),isNaN(i)&&(i=un(t[7]))):a>100&&(i=a%100,a=Math.floor(a/100)),i>=60)return null;if(a>24)return null;if(a>=12&&(o=1),t[9]){if(a>12)return null;var m;"a"==(m=t[9][0].toLowerCase())&&(o=0,12==a&&(a=0)),"p"==m&&(o=1,12!=a&&(a+=12)),r.start.isCertain("meridiem")||(0==o?(r.start.imply("meridiem",0),12==r.start.get("hour")&&r.start.assign("hour",0)):(r.start.imply("meridiem",1),12!=r.start.get("hour")&&r.start.assign("hour",r.start.get("hour")+12)))}else if(t[2]){var f;"朝"==(f=t[2][0])||"早"==f?(o=0,12==a&&(a=0)):"晚"==f&&(o=1,12!=a&&(a+=12))}else if(t[3]){var y;"上"==(y=t[3][0])||"朝"==y||"早"==y||"凌"==y?(o=0,12==a&&(a=0)):"下"!=y&&"晏"!=y&&"晚"!=y||(o=1,12!=a&&(a+=12))}else if(t[5]){var g;"上"==(g=t[5][0])||"朝"==g||"早"==g||"凌"==g?(o=0,12==a&&(a=0)):"下"!=g&&"晏"!=g&&"晚"!=g||(o=1,12!=a&&(a+=12))}return r.text=r.text+t[0],r.end.assign("hour",a),r.end.assign("minute",i),o>=0?r.end.assign("meridiem",o):r.start.isCertain("meridiem")&&1==r.start.get("meridiem")&&r.start.get("hour")>a?r.end.imply("meridiem",0):a>12&&r.end.imply("meridiem",1),r.end.date().getTime()<r.start.date().getTime()&&r.end.imply("day",r.end.get("day")+1),r}}const wn=new RegExp("(?:星期|禮拜|週)(?<weekday>"+Object.keys(dn).join("|")+")");class xn extends B{innerPattern(){return wn}innerExtract(e,t){const n=e.createParsingResult(t.index,t[0]),r=t.groups.weekday,s=dn[r];if(void 0===s)return null;let a=c(e.refDate);const i=a.day();return a=Math.abs(s-7-i)<Math.abs(s-i)?a.day(s-7):Math.abs(s+7-i)<Math.abs(s-i)?a.day(s+7):a.day(s),n.start.assign("weekday",s),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year()),n}}class Tn extends ge{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}}class Mn extends $e{patternBetween(){return/^\s*$/i}}const Dn=new lt(Rn()),$n=new lt(Rn()),An=new lt(Sn());function Pn(e,t,n){return $n.parse(e,t,n)}function Cn(e,t,n){return $n.parseDate(e,t,n)}function Rn(){const e=Sn();return e.parsers.unshift(new an),e}function Sn(){const e=ve({parsers:[new ln,new fn,new xn,new pn,new hn],refiners:[new Tn,new Mn]});return e.refiners=e.refiners.filter(e=>!(e instanceof Se)),e}class En extends B{innerPattern(e){return new RegExp("(现在|立(?:刻|即)|即刻)|(今|明|前|大前|后|大后|昨)(早|晚)|(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨))|(今|明|前|大前|后|大后|昨)(?:日|天)(?:[\\s|,|，]*)(?:(上(?:午)|早(?:上)|下(?:午)|晚(?:上)|夜(?:晚)?|中(?:午)|凌(?:晨)))?","i")}innerExtract(e,t){const n=t.index,r=e.createParsingResult(n,t[0]),s=c(e.refDate);let a=s;if(t[1])r.start.imply("hour",s.hour()),r.start.imply("minute",s.minute()),r.start.imply("second",s.second()),r.start.imply("millisecond",s.millisecond());else if(t[2]){const e=t[2],n=t[3];"明"==e?s.hour()>1&&(a=a.add(1,"day")):"昨"==e?a=a.add(-1,"day"):"前"==e?a=a.add(-2,"day"):"大前"==e?a=a.add(-3,"day"):"后"==e?a=a.add(2,"day"):"大后"==e&&(a=a.add(3,"day")),"早"==n?r.start.imply("hour",6):"晚"==n&&(r.start.imply("hour",22),r.start.imply("meridiem",1))}else if(t[4]){const e=t[4][0];"早"==e||"上"==e?r.start.imply("hour",6):"下"==e?(r.start.imply("hour",15),r.start.imply("meridiem",1)):"中"==e?(r.start.imply("hour",12),r.start.imply("meridiem",1)):"夜"==e||"晚"==e?(r.start.imply("hour",22),r.start.imply("meridiem",1)):"凌"==e&&r.start.imply("hour",0)}else if(t[5]){const e=t[5];"明"==e?s.hour()>1&&(a=a.add(1,"day")):"昨"==e?a=a.add(-1,"day"):"前"==e?a=a.add(-2,"day"):"大前"==e?a=a.add(-3,"day"):"后"==e?a=a.add(2,"day"):"大后"==e&&(a=a.add(3,"day"));const n=t[6];if(n){const e=n[0];"早"==e||"上"==e?r.start.imply("hour",6):"下"==e?(r.start.imply("hour",15),r.start.imply("meridiem",1)):"中"==e?(r.start.imply("hour",12),r.start.imply("meridiem",1)):"夜"==e||"晚"==e?(r.start.imply("hour",22),r.start.imply("meridiem",1)):"凌"==e&&r.start.imply("hour",0)}}return r.start.assign("day",a.date()),r.start.assign("month",a.month()+1),r.start.assign("year",a.year()),r}}class bn extends ge{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}}class kn extends $e{patternBetween(){return/^\s*$/i}}const On=new lt(Wn()),Nn=new lt(Wn()),jn=new lt(In());function vn(e,t,n){return Nn.parse(e,t,n)}function Fn(e,t,n){return Nn.parseDate(e,t,n)}function Wn(){const e=In();return e.parsers.unshift(new En),e}function In(){const e=ve({parsers:[new Jt,new Xt,new sn,new nn,new qt],refiners:[new bn,new kn]});return e.refiners=e.refiners.filter(e=>!(e instanceof Se)),e}const Yn=new lt(Vn()),zn=new lt(Hn());function Un(e,t,n){return Yn.parse(e,t,n)}function Ln(e,t,n){return Yn.parseDate(e,t,n)}function Vn(){const e=Hn();return e.parsers.unshift(new an),e}function Hn(){const e=ve({parsers:[new ln,new Jt,new fn,new Xt,new xn,new sn,new pn,new nn,new hn,new qt],refiners:[new Tn,new Mn]});return e.refiners=e.refiners.filter(e=>!(e instanceof Se)),e}window.chrono={parseDate:function(e,t,n){return wt.parseDate(e,t,n)},parse:function(e,t,n){return wt.parse(e,t,n)},en:e,ja:t,zh:a,options:wt}})()})();